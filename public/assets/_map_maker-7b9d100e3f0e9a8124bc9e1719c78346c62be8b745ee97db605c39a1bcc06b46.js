$(document).on("turbolinks:load",function(){$("input[type='submit'][name='commit'][value='Create Map']").prop("disabled",!0);var a="obj-Tree",t=[[null,null,null],[null,null,null],[null,null,null]];if($("#map_data").val()){for(var e=JSON.parse($("#map_data").val()),i=0;i<e.length;i++)for(var n=0;n<e[i].length;n++){var l=String(i)+"-"+String(n),p=$("#"+l);if(e[i][n]){var s=e[i][n].split("-");p.css("background-image","url(/assets/"+s[1]+".png)"),"char"===s[0]&&(p.empty(),$("<p>"+s[2]+"</p>").appendTo(p))}}t=e}$("#map_data").val(JSON.stringify(t)),$("input").on("click",function(){$("#log").html($("input:checked").val()+" is checked!")}),$(".mapElement").on("click",function(){a=$(this).attr("id"),$(".selected-text").html(a.split("-")[1]),$("#selected-image").css("background-image","url(/assets/"+a.split("-")[1]+".png)")}),$(".btn-mapgrid").unbind("click").on("click",function(e){if(e.stopPropagation(),e.preventDefault(),!($("#show_map-flag").length>0)){var i=a.split("-");if("char"===i[0]){$(this).empty(),$("<p>"+i[2]+"</p>").appendTo($(this));for(var n=0;n<t.length;n++)for(var l=0;l<t.length;l++)if(t[n][l]===a){t[n][l]=null;var p=String(n)+"-"+String(l),s=$("#"+p);s.css("background-image",""),s.html("")}}var r=$(this).attr("id").split("-"),m=r[0],u=r[1];if(m=parseInt(m),u=parseInt(u),"Nil"===i[1])t[m][u]=null,$(this).css("background-image",""),$(this).html(""),$(this).empty();else{t[m][u]=a;var o="/assets/"+i[1]+".png";$(this).css("background-image","url("+o+")")}$("#map_data").val(JSON.stringify(t))}}),$("#map_name").on("keyup",function(){$(this).val()&&$("#map_story").val()?$("input[type='submit'][name='commit'][value='Create Map']").prop("disabled",!1):$("input[type='submit'][name='commit'][value='Create Map']").prop("disabled",!0)}),$("#map_story").on("keyup",function(){$("#map_name").val()&&$(this).val()?$("input[type='submit'][name='commit'][value='Create Map']").prop("disabled",!1):$("input[type='submit'][name='commit'][value='Create Map']").prop("disabled",!0)})});