$(document).on("turbolinks:load",function(){for(var t=6,a=new Array(t),i=0;i<t;i++)a[i]=new Array(t).fill(null);if($("#map_data").val()){for(var e=JSON.parse($("#map_data").val()),i=0;i<e.length;i++)for(var n=0;n<e[i].length;n++){var p=String(i)+"-"+String(n),l=$("#"+p);if(e[i][n]){var s=e[i][n].split("-");l.css("background-image","url(/assets/"+s[1]+".png)"),"char"===s[0]&&(l.empty(),$("<p>"+s[2]+"</p>").appendTo(l))}}a=e}else $("#map_data").val(JSON.stringify(a));var m="obj-Tree";$("input").on("click",function(){$("#log").html($("input:checked").val()+" is checked!")}),$(".mapElement").on("click",function(){m=$(this).attr("id"),$(".selected-text").html(m.split("-")[1]),$("#selected-image").css("background-image","url(/assets/"+m.split("-")[1]+".png)")}),$(".btn-mapgrid").unbind("click").on("click",function(t){if(t.stopPropagation(),t.preventDefault(),!($("#show_map-flag").length>0)){var i=m.split("-");if($(this).html(""),"char"===i[0]){$(this).empty(),$("<p>"+i[2]+"</p>").appendTo($(this));for(var e=0;e<a.length;e++)for(var n=0;n<a.length;n++)if(a[e][n]===m){a[e][n]=null;var p=String(e)+"-"+String(n),l=$("#"+p);l.css("background-image",""),l.html("")}}var s=$(this).attr("id").split("-"),o=s[0],r=s[1];if(o=parseInt(o),r=parseInt(r),"Nil"===i[1])a[o][r]=null,$(this).css("background-image",""),$(this).html(""),$(this).empty();else{a[o][r]=m;var u="/assets/"+i[1]+".png";$(this).css("background-image","url("+u+")")}$("#map_data").val(JSON.stringify(a))}}),$("#map_name").on("keyup",function(){$(this).val()&&$("#map_story").val()?($("input[type='submit'][name='commit'][value='CREATE MAP']").prop("disabled",!1),$("input[type='submit'][name='commit'][value='UPDATE MAP']").prop("disabled",!1)):($("input[type='submit'][name='commit'][value='CREATE MAP']").prop("disabled",!0),$("input[type='submit'][name='commit'][value='UPDATE MAP']").prop("disabled",!0),console.log("DONT"))}),$("#map_story").on("keyup",function(){$("#map_name").val()&&$(this).val()?($("input[type='submit'][name='commit'][value='CREATE MAP']").prop("disabled",!1),$("input[type='submit'][name='commit'][value='UPDATE MAP']").prop("disabled",!1)):($("input[type='submit'][name='commit'][value='CREATE MAP']").prop("disabled",!0),$("input[type='submit'][name='commit'][value='UPDATE MAP']").prop("disabled",!0),console.log("DONT"))})});